window.onfontready=function(e,t,i){i=i||e,i.timeoutAfter&&setTimeout(function(){d&&(o(),i.onTimeout&&i.onTimeout())},i.timeoutAfter);var n=function(e,t,i){i=document.createElement("iframe"),o=function(){e(i.contentWindow.onresize=0)},i.style.width="999%",t.appendChild(i).contentWindow.onresize=c},o=function(){d&&(document.body.removeChild(d),d=0)},d=document.createElement("div"),c=function(){d&&d.firstChild.clientWidth==d.lastChild.clientWidth&&t(o())};c(document.body.appendChild(d).innerHTML='<div style="position:fixed;right:999%;bottom:999%;white-space:pre;font:999px '+(i.generic?"":"'")+e+(i.generic?"":"'")+',serif">'+(i.sampleText||" ")+'</div><div style="position:fixed;right:999%;bottom:999%;white-space:pre;font:999px '+(i.generic?"":"'")+e+(i.generic?"":"'")+',monospace">'+(i.sampleText||" ")+"</div>"),d&&n(o,d.firstChild),d&&n(o,d.lastChild)};